"use strict";!function(){for(var e,n=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],i=o.length,t=window.console=window.console||{};--i;)t[e=o[i]]||(t[e]=n)}(),jQuery(document).ready(function(t){var n,o=t(".carousel"),e=t("#intro"),i=t(".carousel-item").length,a=t("body"),c=t(".carousel-pager");function r(e){var n=e.replace(/[*+?^$.[\]{}()|\\/]/g,"\\$&"),o=location.search.match(new RegExp("[?&]".concat(n,"=([^&]+)(&|$)"))),i=o&&decodeURIComponent(o[1].replace(/\+/g," "));return t.isNumeric(i)?parseInt(i,10):0}function s(){n=t("#intro .carousel-item.active").index()+1,t(".carousel-counter").text("".concat(n,"/").concat(i))}function l(e){n===e?a.addClass("is-highlight"):1===n&&a.removeClass("is-highlight")}o.carousel({interval:0}),e.carousel(r("slide")),0!==r("slide")&&a.removeClass("is-highlight"),s(),e.on("slid.bs.carousel",function(){s()}),e.on("slide.bs.carousel",function(){n=t(".carousel-item.active").index()+1}),o.swiperight(function(){o.carousel("prev"),l(2)}),t(".carousel-control.prev").click(function(){l(2)}),o.swipeleft(function(){o.carousel("next"),l(i)}),t(".carousel-control.next, .intro-section.is-highlight .link-next").click(function(){l(i)}),t(".p-home .header-logo").click(function(e){return e.stopPropagation(),o.carousel(0),a.addClass("is-highlight"),!1});var d={titles:["Плюсы и минус","Услуги","Цены","Об агентстве","Блог","В начало"],setTitle:function(){t(".carousel-control.next").text(this.titles[n-1])}};d.setTitle(),o.on("slid.bs.carousel",function(){d.setTitle()}),o.on("slide.bs.carousel",function(){c.addClass("hidden")}),o.on("slid.bs.carousel",function(){c.removeClass("hidden")}),t(".logo-link").click(function(){t(".navbar-primary > li a").blur()})});var _this=void 0;jQuery(document).ready(function(n){var e,o,i;window.matchMedia("(min-width: 960px)").matches&&(e=n(".has-context-menu"),o=n(".context-menu"),i="undefined"!=typeof InstallTrigger,e.on("contextmenu",function(e){e.preventDefault()}),e.mousedown(function(e){return 2===e.button&&n(e.currentTarget).children(".context-menu").show("fast"),!1}),i?n("body").click(function(){o.hide()}):n(document).click(function(){o.hide()}),n(document).keydown(function(e){27===e.keyCode&&o.hide()}),e.click(function(){n(_this).children(".context-menu").is(":visible")&&o.hide()}),n(".context-menu a").click(function(){var e=n(_this).prop("href");window.open(e),o.hide(84)}))}),jQuery(document).ready(function(e){e(".header__back").on("click",function(){window.history.go(-1)})});_this=void 0;jQuery(document).ready(function(t){t('a[data-src="external"]').click(function(e){var n=t(e.currentTarget).attr("href"),o=t("#modal"),i=t(".modal-content");e.preventDefault(),i.load("".concat(n," .is-modal-src"),function(){o.modal("show")}),o.on("hidden.bs.modal",function(){i.empty()})}),t("#modal-search").on("shown.bs.modal",function(){t("#modal-search .form__search-input").focus()}),t(document).keydown(function(e){27===e.keyCode&&t(".modal").removeClass("show",function(){t(_this).hide(400)})})}),function(e){var n=e(document),o=e("body"),i=e(".navbar");function t(){i.removeClass("navbar-open"),e(".modal-backdrop").removeClass("show"),setTimeout(function(){i.removeClass("navbar-visible"),e(".modal-backdrop").remove()},400)}e(function(){e(".header-navbar-toggler").on("click",function(){i.addClass("navbar-visible navbar-open"),o.append('<div class="modal-backdrop fade"></div>'),setTimeout(function(){e(".modal-backdrop").addClass("show")},40)}),e(".navbar-primary > li > a").click(function(){o.hasClass("is-highlight")&&o.removeClass("is-highlight")}),n.on("tap",".modal-backdrop",function(){t()}),n.keydown(function(e){27===e.keyCode&&t()}),n.on("swipeleft",".modal-backdrop",function(){t()}),i.swipeleft(function(){t()}),e('a[href="#intro"]').on("click",function(){t()})}),e(window).resize(function(){t()})}(jQuery),jQuery(document).ready(function(i){i(".btn-social").not(".facebook-like").click(function(e){var n=i(e.currentTarget),o=n.data("href");n.hasClass("mail")||n.hasClass("whatsapp")?window.location.href=o:window.open(o,"shareWin","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")})}),jQuery(document).ready(function(o){var i;window.matchMedia("(max-width: 767px)").matches&&(i=0,o(window).scroll(function(){var e=o(".main-subheader, .social-tools.is-main"),n=window.pageYOffset||document.documentElement.scrollTop;Math.abs(n-i)<100||(i<n?e.addClass("is-mobile"):e.removeClass("is-mobile"),i=n)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21haW4uanMiLCJjb21wb25lbnRzL2Nhcm91c2Vscy9jYXJvdXNlbHMuanMiLCJjb21wb25lbnRzL2NvbnRleHQtbWVudXMvY29udGV4dC1tZW51LmpzIiwiY29tcG9uZW50cy9oZWFkZXIvaGVhZGVyLmpzIiwiY29tcG9uZW50cy9tb2RhbHMvbW9kYWxzLmpzIiwiY29tcG9uZW50cy9uYXZiYXIvbmF2YmFyLmpzIiwiY29tcG9uZW50cy9zb2NpYWwtdG9vbHMvc29jaWFsLXRvb2xzLmpzIiwiY29tcG9uZW50cy9tYWluL3N1YmhlYWRlcnMvc3ViaGVhZGVycy5qcyJdLCJuYW1lcyI6WyJtZXRob2QiLCJub29wIiwibWV0aG9kcyIsImxlbmd0aCIsImNvbnNvbGUiLCJ3aW5kb3ciLCJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsImN1cnJlbnRTbGlkZSIsImNhcm91c2VsIiwiY2Fyb3VzZWxNYWluIiwidG90YWxJdGVtcyIsImJvZHkiLCJwYWdlciIsImdldFNsaWRlUGFyYW1ldGVyIiwia2V5IiwicHVyZUtleSIsInJlcGxhY2UiLCJtYXRjaCIsImxvY2F0aW9uIiwic2VhcmNoIiwiUmVnRXhwIiwiY29uY2F0Iiwic2xpZGUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJpc051bWVyaWMiLCJwYXJzZUludCIsInNldENvdW50ZXIiLCJpbmRleCIsInRleHQiLCJ0b2dnbGVCb2R5Q2xhc3MiLCJjdXJyZW50IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImludGVydmFsIiwib24iLCJzd2lwZXJpZ2h0IiwiY2xpY2siLCJzd2lwZWxlZnQiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImNhcm91c2VsUGFnZXIiLCJ0aXRsZXMiLCJzZXRUaXRsZSIsInRoaXMiLCJibHVyIiwiZWwiLCJjb250ZXh0TWVudSIsImlzRmlyZWZveCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiSW5zdGFsbFRyaWdnZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJtb3VzZWRvd24iLCJidXR0b24iLCJjdXJyZW50VGFyZ2V0IiwiY2hpbGRyZW4iLCJzaG93IiwiaGlkZSIsImtleWRvd24iLCJrZXlDb2RlIiwiX3RoaXMiLCJpcyIsInVybCIsInByb3AiLCJvcGVuIiwiaGlzdG9yeSIsImdvIiwiaHJlZiIsImF0dHIiLCJtb2RhbCIsImNvbnRhaW5lciIsImxvYWQiLCJlbXB0eSIsImZvY3VzIiwiZG9jIiwibmF2YmFyIiwiY2xvc2VOYXZiYXIiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiYXBwZW5kIiwiaGFzQ2xhc3MiLCJyZXNpemUiLCJub3QiLCJkYXRhIiwibGFzdFNjcm9sbFRvcCIsInNjcm9sbCIsInN1YmhlYWRlciIsInN0IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJNYXRoIiwiYWJzIl0sIm1hcHBpbmdzIjoiY0FRQSxXQU9FLElBTkEsSUFBSUEsRUFDRUMsRUFBTyxhQUNQQyxFQUFVLENBQUMsU0FBVSxRQUFTLFFBQVMsUUFBUyxNQUFPLFNBQVUsUUFBUyxZQUFhLFFBQVMsaUJBQWtCLFdBQVksT0FBUSxNQUFPLGVBQWdCLFVBQVcsYUFBYyxRQUFTLE9BQVEsVUFBVyxXQUFZLGNBQWUsWUFBYSxRQUFTLFFBQ25RQyxFQUFXRCxFQUFYQyxPQUNBQyxFQUFXQyxPQUFPRCxRQUFVQyxPQUFPRCxTQUFXLEtBRTVDRCxHQUlEQyxFQUhMSixFQUFTRSxFQUFRQyxNQUlmQyxFQUFRSixHQUFVQyxHQVp4QixHQ0tBSyxPQUFPQyxVQUFVQyxNQUFNLFNBQUNDLEdBQ3RCLElBTUlDLEVBTkVDLEVBQWVGLEVBQUUsYUFDakJHLEVBQWVILEVBQUUsVUFDakJJLEVBQWVKLEVBQUUsa0JBQWtCTixPQUNuQ1csRUFBZUwsRUFBRSxRQUVqQk0sRUFBZU4sRUFBRSxtQkFnQnZCLFNBQVNPLEVBQWtCQyxHQUV6QixJQUFNQyxFQUFVRCxFQUFJRSxRQUFRLHVCQUF3QixRQUU5Q0MsRUFBUUMsU0FBU0MsT0FBT0YsTUFBTSxJQUFJRyxPQUFK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LE1BS0pGLEVBQUl6QyxHQUFHLFlBQWEsa0JBQW1CLFdBQ3JDMkMsTUFHRkQsRUFBT3ZDLFVBQVUsV0FDZndDLE1BSUZ2RSxFQUFFLG9CQUFvQjRCLEdBQUcsUUFBUyxXQUNoQzJDLFFBS0p2RSxFQUFFSixRQUFRZ0YsT0FBTyxXQUNmTCxNQWpFSixDQW1FRzFFLFFDcEVIQSxPQUFPQyxVQUFVQyxNQUFNLFNBQUNDLEdBQ3RCQSxFQUFFLGVBQWU2RSxJQUFJLGtCQUFrQi9DLE1BQU0sU0FBQ2UsR0FDNUMsSUFBTU4sRUFBT3ZDLEVBQUU2QyxFQUFFSSxlQUNYYSxFQUFPdkIsRUFBR3VDLEtBQUssUUFFakJ2QyxFQUFHb0MsU0FBUyxTQUFXcEMsRUFBR29DLFNBQVMsWUFDckMvRSxPQUFPZ0IsU0FBU2tELEtBQU9BLEVBRXZCbEUsT0FBTytELEtBQUtHLEVBQU0sV0FBWSwrRUNScENqRSxPQUFPQyxVQUFVQyxNQUFNLFNBQUNDLEdBR3RCLElBQ00rRSxFQURGbkYsT0FBTzhDLFdBQVcsc0JBQXNCQyxVQUN0Q29DLEVBQWdCLEVBQ3BCL0UsRUFBRUosUUFBUW9GLE9BQU8sV0FDZixJQUFNQyxFQUFZakYsRUFBRSwwQ0FFZGtGLEVBQUt0RixPQUFPdUYsYUFBZXJGLFNBQVNzRixnQkFBZ0JDLFVBRXREQyxLQUFLQyxJQUFJTCxFQUFLSCxHQUFpQixNQUkxQkEsRUFBTEcsRUFFRkQsRUFBVXhELFNBQVMsYUFHbkJ3RCxFQUFVdkQsWUFBWSxhQUd4QnFELEVBQWdCRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tbXVsdGktYXNzaWduLCBuby1jb25kLWFzc2lnbiwgbm8tdW5kZWYgKi9cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQVZPSUQgYENPTlNPTEVgIEVSUk9SUyBJTiBCUk9XU0VSUyBUSEFUIExBQ0sgQSBDT05TT0xFXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbigoKSA9PiB7XG4gIGxldCBtZXRob2Q7XG4gIGNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcbiAgY29uc3QgbWV0aG9kcyA9IFsnYXNzZXJ0JywgJ2NsZWFyJywgJ2NvdW50JywgJ2RlYnVnJywgJ2RpcicsICdkaXJ4bWwnLCAnZXJyb3InLCAnZXhjZXB0aW9uJywgJ2dyb3VwJywgJ2dyb3VwQ29sbGFwc2VkJywgJ2dyb3VwRW5kJywgJ2luZm8nLCAnbG9nJywgJ21hcmtUaW1lbGluZScsICdwcm9maWxlJywgJ3Byb2ZpbGVFbmQnLCAndGFibGUnLCAndGltZScsICd0aW1lRW5kJywgJ3RpbWVsaW5lJywgJ3RpbWVsaW5lRW5kJywgJ3RpbWVTdGFtcCcsICd0cmFjZScsICd3YXJuJ107XG4gIGxldCB7IGxlbmd0aCB9ID0gbWV0aG9kcztcbiAgY29uc3QgY29uc29sZSA9ICh3aW5kb3cuY29uc29sZSA9IHdpbmRvdy5jb25zb2xlIHx8IHt9KTtcblxuICB3aGlsZSAoKGxlbmd0aCAtPSAxKSkge1xuICAgIG1ldGhvZCA9IG1ldGhvZHNbbGVuZ3RoXTtcblxuICAgIC8vIE9ubHkgc3R1YiB1bmRlZmluZWQgbWV0aG9kcy5cbiAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkge1xuICAgICAgY29uc29sZVttZXRob2RdID0gbm9vcDtcbiAgICB9XG4gIH1cbn0pKCk7XG5cbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIENBUk9VU0VMXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIFByZXZlbnRpbmcgY2Fyb3VzZWwgZnJvbSBhdXRvIHNsaWRpbmcuXG4gKiBMaW5rcyB0byBzcGVjaWZpYyBzbGlkZSBmcm9tIGlubmVyIHBhZ2VzLlxuICogU3dpcGluZyB0byBnbyBiYWNrIGFuZCBmb3J0aCBiZXR3ZWVuIHRoZSBzbGlkZXMuXG4gKiBDaGFuZ2UgYm9keSBiYWNrZ3JvdW5kIGNvbG9yIHRvIHllbGxvdyBhbmQgdmljZSB2ZXJzYS5cbiAqIFNldCBzbGlkZSBjb3VudGVyIGluIGZvb3Rlci5cbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuICBjb25zdCBjYXJvdXNlbCAgICAgPSAkKCcuY2Fyb3VzZWwnKTtcbiAgY29uc3QgY2Fyb3VzZWxNYWluID0gJCgnI2ludHJvJyk7XG4gIGNvbnN0IHRvdGFsSXRlbXMgICA9ICQoJy5jYXJvdXNlbC1pdGVtJykubGVuZ3RoO1xuICBjb25zdCBib2R5ICAgICAgICAgPSAkKCdib2R5Jyk7XG4gIC8vIGNvbnN0IGxpa2VTaGFyZSAgICA9ICQoJy5zb2NpYWwtdG9vbHMnKTtcbiAgY29uc3QgcGFnZXIgICAgICAgID0gJCgnLmNhcm91c2VsLXBhZ2VyJyk7XG4gIGxldCBjdXJyZW50U2xpZGU7XG5cbiAgLy8gUHJldmVudGluZyBCb290c3RyYXAgY2Fyb3VzZWwgZnJvbSBhdXRvIHNsaWRpbmdcbiAgY2Fyb3VzZWwuY2Fyb3VzZWwoe1xuICAgIGludGVydmFsOiAwLFxuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIExpbmsgdG8gc3BlY2lmaWMgc2xpZGUgZnJvbSBpbm5lciBwYWdlczogLz9zbGlkZT0yXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IC0gdXJsIHBhcmFtZXRlciBrZXkuIEUuZy4gJ3NsaWRlJyBpbiAnc2xpZGU9MidcbiAgICogQHJldHVybiB7TnVtYmVyfSBJZiAnc2xpZGUnIHBhcmFtZXRlciBpcyBub3QgcHJlc2VudCBvciBkb2Vzbid0IGhhdmVcbiAgICogY29ycmVjdCB2YWx1ZXMgbG9hZCAwdGggc2xpZGVcbiAgICovXG4gIGZ1bmN0aW9uIGdldFNsaWRlUGFyYW1ldGVyKGtleSkge1xuICAgIC8vIEVzY2FwZSBSZWdFeCBtZXRhIGNoYXJzXG4gICAgY29uc3QgcHVyZUtleSA9IGtleS5yZXBsYWNlKC9bKis/XiQuW1xcXXt9KCl8XFxcXC9dL2csICdcXFxcJCYnKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgY29uc3QgbWF0Y2ggPSBsb2NhdGlvbi5zZWFyY2gubWF0Y2gobmV3IFJlZ0V4cChgWz8mXSR7cHVyZUtleX09KFteJl0rKSgmfCQpYCkpO1xuICAgIGNvbnN0IHNsaWRlID0gbWF0Y2ggJiYgZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbiAgICBpZiAoJC5pc051bWVyaWMoc2xpZGUpKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoc2xpZGUsIDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvLyBDYWxsLiBHbyB0byBzbGlkZSBwb2ludGluZyBpbiBVUkwgb24gcGFnZSBsb2FkXG4gIGNhcm91c2VsTWFpbi5jYXJvdXNlbChnZXRTbGlkZVBhcmFtZXRlcignc2xpZGUnKSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBSZW1vdmUgLmlzLWhpZ2hsaWdodCBmcm9tIGJvZHkgaWYgLz9zbGlkZT0yK1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIGlmIChnZXRTbGlkZVBhcmFtZXRlcignc2xpZGUnKSAhPT0gMCkge1xuICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ2lzLWhpZ2hsaWdodCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb3VudGVyIGluIHNsaWRlIGZvb3Rlci4gRS5nLiAyLzZcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICBmdW5jdGlvbiBzZXRDb3VudGVyKCkge1xuICAgIGN1cnJlbnRTbGlkZSA9ICQoJyNpbnRybyAuY2Fyb3VzZWwtaXRlbS5hY3RpdmUnKS5pbmRleCgpICsgMTtcbiAgICAkKCcuY2Fyb3VzZWwtY291bnRlcicpLnRleHQoYCR7Y3VycmVudFNsaWRlfS8ke3RvdGFsSXRlbXN9YCk7XG4gIH1cblxuICAvLyBTZXQgc2xpZGUgY291bnRlciBvbiBwYWdlIGxvYWQgYW5kIHVwZGF0ZSBpdCBvbiBzbGlkZVxuICBzZXRDb3VudGVyKCk7XG5cbiAgY2Fyb3VzZWxNYWluLm9uKCdzbGlkLmJzLmNhcm91c2VsJywgKCkgPT4ge1xuICAgIHNldENvdW50ZXIoKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBOYXZpZ2F0aW9uIGFuZCBjaGFuZ2UgYm9keSBiYWNrZ3JvdW5kXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBVcGRhdGUgY3VycmVudFNsaWRlIHdoZW4gdGhlIHNsaWRlIGluc3RhbmNlIG1ldGhvZCBpcyBpbnZva2VkXG4gICAqL1xuICBjYXJvdXNlbE1haW4ub24oJ3NsaWRlLmJzLmNhcm91c2VsJywgKCkgPT4ge1xuICAgIGN1cnJlbnRTbGlkZSA9ICQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmluZGV4KCkgKyAxO1xuICB9KTtcblxuICAvKipcbiAgICogQ2hhbmdlIGJvZHkgYmFja2dyb3VuZCBjb2xvciB0byB5ZWxsb3cgYW5kIHZpY2UgdmVyc2EuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjdXJyZW50XG4gICAqIEBzZWUgYWxzbyBuYXZiYXIvbmF2YmFyLmpzXG4gICAqL1xuICBmdW5jdGlvbiB0b2dnbGVCb2R5Q2xhc3MoY3VycmVudCkge1xuICAgIGlmIChjdXJyZW50U2xpZGUgPT09IGN1cnJlbnQpIHtcbiAgICAgIGJvZHkuYWRkQ2xhc3MoJ2lzLWhpZ2hsaWdodCcpO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFNsaWRlID09PSAxKSB7XG4gICAgICBib2R5LnJlbW92ZUNsYXNzKCdpcy1oaWdobGlnaHQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEFkZCBjbGFzcyAuaXMtdXBjb21pbmcgdG8gYWN0aXZhdGUgYW5pbWF0aW9uIGluIGN1cnJlbnQgc2xpZGUgaGVhZGVyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAvLyAkKCcjaW50cm8nKS5vbignc2xpZGUuYnMuY2Fyb3VzZWwnLCAoKSA9PiB7XG4gIC8vICAgc2V0VGltZW91dCgoKSA9PiB7XG4gIC8vICAgICAkKCcuY2Fyb3VzZWwtaXRlbScpLnJlbW92ZUNsYXNzKCdpcy11cGNvbWluZycpO1xuICAvLyAgICAgJCgnLmNhcm91c2VsLWl0ZW0tbmV4dCwgLmNhcm91c2VsLWl0ZW0tcHJldicpLmFkZENsYXNzKCdpcy11cGNvbWluZycpO1xuICAvLyAgIH0sIDEpO1xuICAvLyB9KTtcblxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogUHJldlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogRm9yIHN3aXBlIHRvdWNoIGV2ZW50IGhlYWQgalF1ZXJ5IE1vYmlsZSwgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHdpdGhcbiAgICoganVzdCBUb3VjaCBhbmQgYWRkIGl0IHRvIHByb2plY3QuXG4gICAqIGpxdWVyeW1vYmlsZS5jb20vZG93bmxvYWQtYnVpbGRlci8gPT4gL3NyYy9qcy9qcXVlcnkubW9iaWxlLmN1c3RvbS5qc1xuICAgKi9cblxuICBjYXJvdXNlbC5zd2lwZXJpZ2h0KCgpID0+IHtcbiAgICBjYXJvdXNlbC5jYXJvdXNlbCgncHJldicpO1xuICAgIHRvZ2dsZUJvZHlDbGFzcygyKTtcbiAgfSk7XG5cbiAgJCgnLmNhcm91c2VsLWNvbnRyb2wucHJldicpLmNsaWNrKCgpID0+IHtcbiAgICB0b2dnbGVCb2R5Q2xhc3MoMik7XG4gIH0pO1xuXG4gIC8vIE5leHRcbiAgLy8gY2Fyb3VzZWwuc3dpcGUoe1xuICAvLyAgIHN3aXBlTGVmdCgpIHtcbiAgLy8gICAgIGNhcm91c2VsLmNhcm91c2VsKCduZXh0Jyk7XG4gIC8vICAgICB0b2dnbGVCb2R5Q2xhc3ModG90YWxJdGVtcyk7XG4gIC8vICAgfSxcbiAgLy8gfSk7XG5cbiAgY2Fyb3VzZWwuc3dpcGVsZWZ0KCgpID0+IHtcbiAgICBjYXJvdXNlbC5jYXJvdXNlbCgnbmV4dCcpO1xuICAgIHRvZ2dsZUJvZHlDbGFzcyh0b3RhbEl0ZW1zKTtcbiAgfSk7XG5cbiAgJCgnLmNhcm91c2VsLWNvbnRyb2wubmV4dCwgLmludHJvLXNlY3Rpb24uaXMtaGlnaGxpZ2h0IC5saW5rLW5leHQnKS5jbGljaygoKSA9PiB7XG4gICAgdG9nZ2xlQm9keUNsYXNzKHRvdGFsSXRlbXMpO1xuICB9KTtcblxuICAvLyBSZXR1cm4gdG8gdGhlIGZpcnN0IHNsaWRlXG5cbiAgJCgnLnAtaG9tZSAuaGVhZGVyLWxvZ28nKS5jbGljaygoZXZlbnQpID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjYXJvdXNlbC5jYXJvdXNlbCgwKTtcbiAgICBib2R5LmFkZENsYXNzKCdpcy1oaWdobGlnaHQnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBTZXQgbGFiZWwgb2YgY2Fyb3VzZWwtY29udHJvbFxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIGNvbnN0IGNhcm91c2VsUGFnZXIgPSB7XG4gICAgdGl0bGVzOiBbJ9Cf0LvRjtGB0Ysg0Lgg0LzQuNC90YPRgScsICfQo9GB0LvRg9Cz0LgnLCAn0KbQtdC90YsnLCAn0J7QsSDQsNCz0LXQvdGC0YHRgtCy0LUnLCAn0JHQu9C+0LMnLCAn0JIg0L3QsNGH0LDQu9C+J10sXG4gICAgc2V0VGl0bGUoKSB7XG4gICAgICAkKCcuY2Fyb3VzZWwtY29udHJvbC5uZXh0JykudGV4dCh0aGlzLnRpdGxlc1tjdXJyZW50U2xpZGUgLSAxXSk7XG4gICAgfSxcbiAgfTtcblxuICBjYXJvdXNlbFBhZ2VyLnNldFRpdGxlKCk7XG5cbiAgY2Fyb3VzZWwub24oJ3NsaWQuYnMuY2Fyb3VzZWwnLCAoKSA9PiB7XG4gICAgY2Fyb3VzZWxQYWdlci5zZXRUaXRsZSgpO1xuICB9KTtcblxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogVG9nZ2xlIGxpa2Utbi1zaGFyZSBoaWRkZW4gY2xhc3NcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvLyBjYXJvdXNlbC5vbignc2xpZC5icy5jYXJvdXNlbCcsICgpID0+IHtcbiAgLy8gICBpZiAoY3VycmVudFNsaWRlID09PSAxKSB7XG4gIC8vICAgICBsaWtlU2hhcmUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAvLyAgIH1cbiAgLy8gfSk7XG5cbiAgLy8gY2Fyb3VzZWwub24oJ3NsaWRlLmJzLmNhcm91c2VsJywgKCkgPT4ge1xuICAvLyAgIGlmIChjdXJyZW50U2xpZGUgPT09IDEpIHtcbiAgLy8gICAgIGxpa2VTaGFyZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIC8vICAgfVxuICAvLyB9KTtcblxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogVG9nZ2xlIHBhZ2VyIGhpZGRlbiBjbGFzc1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIGNhcm91c2VsLm9uKCdzbGlkZS5icy5jYXJvdXNlbCcsICgpID0+IHtcbiAgICBwYWdlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH0pO1xuXG4gIGNhcm91c2VsLm9uKCdzbGlkLmJzLmNhcm91c2VsJywgKCkgPT4ge1xuICAgIHBhZ2VyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCbHVyIG1haW4gbmF2IGxpbmsgd2hlbiBjbGlja2luZyBvbiBsb2dvXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAkKCcubG9nby1saW5rJykuY2xpY2soKCkgPT4ge1xuICAgICQoJy5uYXZiYXItcHJpbWFyeSA+IGxpIGEnKS5ibHVyKCk7XG4gIH0pO1xufSk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDT05URVhUIE1FTlVcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogU2hvdyBlbGVtZW50cyBvbiByaWdodCBtb3VzZSBidXR0b24gY2xpY2tcbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDk2MHB4KScpLm1hdGNoZXMpIHtcbiAgICBjb25zdCBlbCA9ICQoJy5oYXMtY29udGV4dC1tZW51Jyk7XG4gICAgY29uc3QgY29udGV4dE1lbnUgPSAkKCcuY29udGV4dC1tZW51Jyk7XG4gICAgY29uc3QgaXNGaXJlZm94ID0gdHlwZW9mIEluc3RhbGxUcmlnZ2VyICE9PSAndW5kZWZpbmVkJztcblxuICAgIGVsLm9uKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICBlbC5tb3VzZWRvd24oKGUpID0+IHtcbiAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikge1xuICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuY2hpbGRyZW4oJy5jb250ZXh0LW1lbnUnKS5zaG93KCdmYXN0Jyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDbG9zZSBwb3B1cHNcbiAgICAgKlxuICAgICAqIDEpICQoZG9jdW1lbnQpIGNhdXNlIGVycm9yIG9uIEZpcmVmb3hcbiAgICAgKi9cblxuICAgIGlmIChpc0ZpcmVmb3gpIHtcbiAgICAgICQoJ2JvZHknKS5jbGljaygoKSA9PiB7IC8vIDFcbiAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoZG9jdW1lbnQpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJChkb2N1bWVudCkua2V5ZG93bigoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZWwuY2xpY2soKCkgPT4ge1xuICAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5jb250ZXh0LW1lbnUnKS5pcygnOnZpc2libGUnKSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgICBjb250ZXh0TWVudS5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBMaW5rc1xuICAgICAqXG4gICAgICogMikgR28gdG8gVVJMIHdpdGggdGFyZ2V0PeKAnF9ibGFua+KAnVxuICAgICAqIDMpIEhpZGUgaXQgYWZ0ZXIgdGhlIGFjdGlvbiB3YXMgdHJpZ2dlcmVkXG4gICAgICovXG4gICAgJCgnLmNvbnRleHQtbWVudSBhJykuY2xpY2soKCkgPT4ge1xuICAgICAgY29uc3QgdXJsID0gJCh0aGlzKS5wcm9wKCdocmVmJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICB3aW5kb3cub3Blbih1cmwpOyAvLyAyXG5cbiAgICAgIGNvbnRleHRNZW51LmhpZGUoODQpOyAvLyAzXG4gICAgfSk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogSEVBREVSIEJFSEFWSU9VUlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KCgkKSA9PiB7XG4gIC8vIEJhY2sgYnV0dG9uXG4gICQoJy5oZWFkZXJfX2JhY2snKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgd2luZG93Lmhpc3RvcnkuZ28oLTEpO1xuICB9KTtcbn0pO1xuXG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBNT0RBTCBXSU5ET1dTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIEFkZCBsb2FkKCkgbWV0aG9kIHRvIEJvb3RzdHJhcCBtb2RhbHNcbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuICAkKCdhW2RhdGEtc3JjPVwiZXh0ZXJuYWxcIl0nKS5jbGljaygoZSkgPT4ge1xuICAgIGNvbnN0IGhyZWYgICAgICA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdocmVmJyk7XG4gICAgY29uc3QgbW9kYWwgICAgID0gJCgnI21vZGFsJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gJCgnLm1vZGFsLWNvbnRlbnQnKTtcblxuICAgIC8vIENhbmNlbCB0aGUgbGluayBiZWhhdmlvclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIExvYWQgY29udGVudCBhbmQgc2hvdyBtb2RhbC5cbiAgICBjb250YWluZXIubG9hZChgJHtocmVmfSAuaXMtbW9kYWwtc3JjYCwgKCkgPT4ge1xuICAgICAgbW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICB9KTtcblxuICAgIC8vIENsZWFyIG1vZGFsIGNvbnRlbnQgdG8gcHJldmVudCBzaG93IGl0IGJlZm9yZSBuZXcgZG9jdW1lbnQgaGFzIGJlZW4gbG9hZGVkXG4gICAgbW9kYWwub24oJ2hpZGRlbi5icy5tb2RhbCcsICgpID0+IHtcbiAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcjbW9kYWwtc2VhcmNoJykub24oJ3Nob3duLmJzLm1vZGFsJywgKCkgPT4ge1xuICAgICQoJyNtb2RhbC1zZWFyY2ggLmZvcm1fX3NlYXJjaC1pbnB1dCcpLmZvY3VzKCk7XG4gIH0pO1xuXG4gIC8vIEhpZGUgbW9kZWwgb24gRXNjXG4gICQoZG9jdW1lbnQpLmtleWRvd24oKGUpID0+IHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgICAgJCgnLm1vZGFsJykucmVtb3ZlQ2xhc3MoJ3Nob3cnLCAoKSA9PiB7XG4gICAgICAgICQodGhpcykuaGlkZSg0MDApO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRFJBV0VSIE1FTlVcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogT3BlbiBuYXZiYXIgYW5kIHR1cm4gb24gb3ZlcmxheS5cbiAqIFJlbW92ZSBib2R5IC5pcy1oaWdobGlnaHQgKHllbGxvdykgY2xhc3MuXG4gKlxuICovXG5cbigoJCkgPT4ge1xuICBjb25zdCBkb2MgPSAkKGRvY3VtZW50KTtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKTtcbiAgY29uc3QgbmF2YmFyID0gJCgnLm5hdmJhcicpO1xuXG4gIC8qKlxuICAgKiBDbG9zZSBkcmF3ZXJcbiAgICovXG4gIGZ1bmN0aW9uIGNsb3NlTmF2YmFyKCkge1xuICAgIG5hdmJhci5yZW1vdmVDbGFzcygnbmF2YmFyLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBuYXZiYXIucmVtb3ZlQ2xhc3MoJ25hdmJhci12aXNpYmxlJyk7XG4gICAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmUoKTtcbiAgICB9LCA0MDApOyAvLyAuNHNcbiAgfSAvLyAvIGNsb3NlTmF2YmFyKClcblxuICAvLyBFeGVjdXRlIG9uIGRvY3VtZW50IHJlYWR5XG4gICQoKCkgPT4ge1xuICAgIC8vIE9wZW4gbmF2YmFyIGFuZCB0dXJuIG9uIG92ZXJsYXlcbiAgICAkKCcuaGVhZGVyLW5hdmJhci10b2dnbGVyJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbmF2YmFyLmFkZENsYXNzKCduYXZiYXItdmlzaWJsZSBuYXZiYXItb3BlbicpO1xuICAgICAgYm9keS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtb2RhbC1iYWNrZHJvcCBmYWRlXCI+PC9kaXY+Jyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgIH0sIDQwKTtcbiAgICB9KTtcblxuICAgIC8vIFJlbW92ZSBib2R5IC5pcy1oaWdobGlnaHQgKHllbGxvdykgY2xhc3MuXG4gICAgJCgnLm5hdmJhci1wcmltYXJ5ID4gbGkgPiBhJykuY2xpY2soKCkgPT4ge1xuICAgICAgaWYgKGJvZHkuaGFzQ2xhc3MoJ2lzLWhpZ2hsaWdodCcpKSB7XG4gICAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ2lzLWhpZ2hsaWdodCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2UgY2xpY2tpbmcgb24gb3ZlcmxheVxuICAgIGRvYy5vbigndGFwJywgJy5tb2RhbC1iYWNrZHJvcCcsICgpID0+IHtcbiAgICAgIGNsb3NlTmF2YmFyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBDbG9zZSBwcmVzc2luZyBFc2MuIEZvciBpUGFkIFByb1xuICAgIGRvYy5rZXlkb3duKChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgICAgICBjbG9zZU5hdmJhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2Ugc3dpcGluZyBvbiBvdmVybGF5IGFuZCBuYXZiYXJcbiAgICBkb2Mub24oJ3N3aXBlbGVmdCcsICcubW9kYWwtYmFja2Ryb3AnLCAoKSA9PiB7XG4gICAgICBjbG9zZU5hdmJhcigpO1xuICAgIH0pO1xuXG4gICAgbmF2YmFyLnN3aXBlbGVmdCgoKSA9PiB7XG4gICAgICBjbG9zZU5hdmJhcigpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2UgY2xpY2tpbmcgb24gY2Fyb3VzZWxlIGNvbnRyb2xzXG4gICAgJCgnYVtocmVmPVwiI2ludHJvXCJdJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY2xvc2VOYXZiYXIoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gRXhlY3V0ZSBvbiB3aW5kb3cgcmVzaXplXG4gICQod2luZG93KS5yZXNpemUoKCkgPT4ge1xuICAgIGNsb3NlTmF2YmFyKCk7XG4gIH0pO1xufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFNPQ0lBTCBTSEFSSU5HXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIE9wZW4gc2hhcmUgcG9wdXBcbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuICAkKCcuYnRuLXNvY2lhbCcpLm5vdCgnLmZhY2Vib29rLWxpa2UnKS5jbGljaygoZSkgPT4ge1xuICAgIGNvbnN0IGVsICAgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgY29uc3QgaHJlZiA9IGVsLmRhdGEoJ2hyZWYnKTtcblxuICAgIGlmIChlbC5oYXNDbGFzcygnbWFpbCcpIHx8IGVsLmhhc0NsYXNzKCd3aGF0c2FwcCcpKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5vcGVuKGhyZWYsICdzaGFyZVdpbicsICdtZW51YmFyPW5vLHRvb2xiYXI9bm8scmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxoZWlnaHQ9NjAwLHdpZHRoPTYwMCcpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogU1VCSEVBREVSXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIEhpZGUgbWFpbiBoZWFkZXIgYW5kIHNob3cgc3ViaGVhZGVyXG4gKlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcbiAgLy8gSGlkZSBtYWluIGhlYWRlciBhbmQgc2hvdyBzdWJoZWFkZXJcblxuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDc2N3B4KScpLm1hdGNoZXMpIHtcbiAgICBsZXQgbGFzdFNjcm9sbFRvcCA9IDA7XG4gICAgJCh3aW5kb3cpLnNjcm9sbCgoKSA9PiB7XG4gICAgICBjb25zdCBzdWJoZWFkZXIgPSAkKCcubWFpbi1zdWJoZWFkZXIsIC5zb2NpYWwtdG9vbHMuaXMtbWFpbicpO1xuICAgICAgLy8gc3QgPSBzY3JvbGxUb3BcbiAgICAgIGNvbnN0IHN0ID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5cbiAgICAgIGlmIChNYXRoLmFicyhzdCAtIGxhc3RTY3JvbGxUb3ApIDwgMTAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0ID4gbGFzdFNjcm9sbFRvcCkge1xuICAgICAgICAvLyBkb3duc2Nyb2xsIGNvZGVcbiAgICAgICAgc3ViaGVhZGVyLmFkZENsYXNzKCdpcy1tb2JpbGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVwc2Nyb2xsIGNvZGVcbiAgICAgICAgc3ViaGVhZGVyLnJlbW92ZUNsYXNzKCdpcy1tb2JpbGUnKTtcbiAgICAgIH1cblxuICAgICAgbGFzdFNjcm9sbFRvcCA9IHN0O1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==
